<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Welcome ‚Äì Invoice Pro</title>

<link rel="manifest" href="/static/manifest.json">
<meta name="theme-color" content="#5b6cff">

<style>
:root{
    --primary:#5b6cff;
    --secondary:#7c8cff;
}
*{
    box-sizing:border-box;
    margin:0;
    padding:0;
}

html,body{
    width:100%;
    overflow-x:hidden; /* üî• MAIN FIX */
}

body{
    background:linear-gradient(135deg,var(--primary),var(--secondary));
    font-family:system-ui,-apple-system;
    min-height:100dvh;
    display:flex;
    align-items:center;
    justify-content:center;
    color:#fff;
    padding:16px;
}

/* üå´ PREMIUM FLOATING BLOBS */
.bg{
    position:fixed;
    width:240px;
    height:240px;
    background:rgba(255,255,255,.08);
    border-radius:50%;
    animation:float 14s infinite ease-in-out;
    filter:blur(2px);
}
.bg.two{
    width:180px;
    height:180px;
    right:-40px;
    bottom:-40px;
    animation-delay:6s;
}

@keyframes float{
    0%,100%{transform:translateY(0)}
    50%{transform:translateY(-35px)}
}

/* üßä PREMIUM GLASS CARD */
.card{
    background:rgba(255,255,255,0.20);
    padding:34px;
    border-radius:26px;
    max-width:420px;
    width:100%;
    text-align:center;
    backdrop-filter:blur(18px);
    box-shadow:0 30px 70px rgba(0,0,0,.25);
    animation:cardIn .8s ease-out;
}

@keyframes cardIn{
    from{opacity:0;transform:translateY(30px) scale(.96)}
    to{opacity:1;transform:none}
}

.logo-wrap{
    width:90px;height:90px;
    margin:0 auto 16px;
    border-radius:22px;
    background:#fff;
    display:flex;
    align-items:center;
    justify-content:center;
    box-shadow:0 10px 25px rgba(0,0,0,.25);
}
.logo-wrap img{width:54px}

h1{font-size:26px;margin:8px 0}
.subtitle{font-size:14px;opacity:.9;line-height:1.6}

ul{
    list-style:none;
    margin:20px 0;
    text-align:left;
    font-size:14px;
}
ul li{margin-bottom:8px}

/* ‚ú® PREMIUM BUTTON */
.install-card-btn{
    width:100%;
    padding:14px;
    border:none;
    border-radius:14px;
    font-weight:700;
    font-size:15px;
    cursor:pointer;
    background:#fff;
    color:var(--primary);
    margin-top:16px;
    transition:all .25s ease;
}

.install-card-btn:hover{
    transform:translateY(-2px);
    box-shadow:0 10px 25px rgba(0,0,0,.25);
}

.install-card-btn:active{
    transform:scale(.98);
}

/* MODAL */
.modal{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.55);
    display:none;
    align-items:center;
    justify-content:center;
    z-index:5000;
}
.modal.show{display:flex}

.modal-box{
    background:rgba(255,255,255,.2);
    backdrop-filter:blur(18px);
    border-radius:22px;
    padding:26px;
    width:90%;
    max-width:360px;
    text-align:center;
    animation:modalIn .3s ease;
}

@keyframes modalIn{
    from{opacity:0;transform:scale(.9)}
    to{opacity:1}
}

.modal-actions button{
    width:100%;
    margin-top:12px;
    padding:12px;
    border-radius:12px;
    border:none;
    font-weight:700;
}

.primary{background:#fff;color:var(--primary)}
.secondary{background:transparent;color:#fff;border:1px solid rgba(255,255,255,.4)}
</style>
</head>

<body>

<div class="bg"></div>
<div class="bg two"></div>

<div class="card">
<div class="logo-wrap">
<img src="{{ url_for('static', filename='icons/icon-512.png') }}">
</div>

<h1>Invoice Pro</h1>
<p class="subtitle">Create professional invoices in seconds ‚Äî fast, private & offline.</p>

<ul>
<li>üìÑ Instant invoice creation</li>
<li>üïí Invoice history tracking</li>
<li>üåì Light & Dark mode</li>
<li>üîê Data stays on your device</li>
</ul>

<button id="installCardBtn" class="install-card-btn">üì≤ Install App</button>

<form method="POST" action="/welcome">
<button type="submit" class="install-card-btn">
üöÄ Get Started
</button>
</form>

<p class="subtitle" style="margin-top:14px;font-size:12px">
No sign-up ‚Ä¢ Free forever
</p>
</div>

<!-- MODAL -->
<div id="installModal" class="modal">
<div class="modal-box">
<h2>Install Invoice Pro</h2>
<p id="installText"></p>
<div class="modal-actions">
<button id="installNow" class="primary">Install now</button>
<button onclick="closeModal()" class="secondary">Later</button>
</div>
</div>
</div>

<script>
const installBtn = document.getElementById("installCardBtn");
const modal = document.getElementById("installModal");
const installText = document.getElementById("installText");
const installNow = document.getElementById("installNow");
const isIOS = /iphone|ipad|ipod/i.test(navigator.userAgent);
let deferredPrompt = null;

function closeModal(){ modal.classList.remove("show"); }

window.addEventListener("beforeinstallprompt", e=>{
    e.preventDefault();
    deferredPrompt=e;
});

installBtn.onclick=()=>{
    modal.classList.add("show");
    if(isIOS){
        installText.innerHTML=`Tap <b>Share</b> ‚Üí <b>Add to Home Screen</b>`;
        installNow.style.display="none";
    }else{
        installText.innerText="Install Invoice Pro for faster access and offline use.";
        installNow.style.display="block";
    }
};

installNow.onclick=()=>deferredPrompt && deferredPrompt.prompt();
</script>

</body>
</html>