<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Welcome ‚Äì Invoice Pro</title>

<style>
:root{
    --primary:#5b6cff;
    --secondary:#7c8cff;
}

*{box-sizing:border-box}

body{
    background:linear-gradient(135deg,var(--primary),var(--secondary));
    font-family:system-ui,-apple-system;
    margin:0;
    height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    color:#fff;
    overflow:hidden;
}

/* background bubbles */
.bg{
    position:absolute;
    width:260px;
    height:260px;
    background:rgba(255,255,255,.08);
    border-radius:50%;
    animation:float 12s infinite ease-in-out;
}
.bg.two{
    width:200px;
    height:200px;
    right:-50px;
    bottom:-50px;
    animation-delay:5s;
}
@keyframes float{
    0%,100%{transform:translateY(0)}
    50%{transform:translateY(-30px)}
}

/* card */
.card{
    background:rgba(255,255,255,0.18);
    padding:34px;
    border-radius:26px;
    max-width:420px;
    width:90%;
    text-align:center;
    backdrop-filter:blur(14px);
    box-shadow:0 20px 50px rgba(0,0,0,.2);
}

.logo-wrap{
    width:90px;height:90px;
    margin:0 auto 16px;
    border-radius:22px;
    background:#fff;
    display:flex;
    align-items:center;
    justify-content:center;
}

.logo-wrap img{width:54px}

h1{font-size:26px;margin:8px 0}
.subtitle{font-size:14px;opacity:.9;line-height:1.6}

ul{
    list-style:none;
    padding:0;margin:20px 0;
    text-align:left;font-size:14px;
}
ul li{margin-bottom:8px}

/* install CTA inside card */
.install-card-btn{
    width:100%;
    padding:14px;
    border:none;
    border-radius:14px;
    font-weight:700;
    font-size:15px;
    cursor:pointer;
    background:#fff;
    color:var(--primary);
    margin-top:16px;
}

/* modal */
.modal{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.55);
    display:none;
    align-items:center;
    justify-content:center;
    z-index:5000;
}
.modal.show{display:flex}

.modal-box{
    background:rgba(255,255,255,.18);
    backdrop-filter:blur(18px);
    border-radius:22px;
    padding:26px;
    width:90%;
    max-width:360px;
    text-align:center;
}

.modal-box h2{margin-top:0}
.modal-box p{font-size:14px;line-height:1.6}

.modal-actions button{
    width:100%;
    margin-top:12px;
    padding:12px;
    border-radius:12px;
    border:none;
    font-weight:700;
    cursor:pointer;
}
.primary{background:#fff;color:var(--primary)}
.secondary{background:transparent;color:#fff;border:1px solid rgba(255,255,255,.4)}
</style>
</head>

<body>

<div class="bg"></div>
<div class="bg two"></div>

<div class="card">

<div class="logo-wrap">
<img src="{{ url_for('static', filename='icons/icon-512.png') }}">
</div>

<h1>Invoice Pro</h1>
<p class="subtitle">
Create professional invoices in seconds ‚Äî fast, private & offline.
</p>

<ul>
<li>üìÑ Instant invoice creation</li>
<li>üïí Invoice history tracking</li>
<li>üåì Light & Dark mode</li>
<li>üîê Data stays on your device</li>
</ul>

<button id="installCardBtn" class="install-card-btn">
üì≤ Install App
</button>

<p class="subtitle" style="margin-top:14px;font-size:12px">
No sign-up ‚Ä¢ Free forever
</p>
</div>

<!-- INSTALL MODAL -->
<div id="installModal" class="modal">
<div class="modal-box">
<h2>Install Invoice Pro</h2>
<p id="installText"></p>

<div class="modal-actions">
<button id="installNow" class="primary">Install</button>
<button onclick="closeModal()" class="secondary">Later</button>
</div>
</div>
</div>

<script>
    if (window.matchMedia('(display-mode: standalone)').matches) {
    window.location.href = "/index.html";
}
let deferredPrompt = null;

const modal = document.getElementById("installModal");
const installText = document.getElementById("installText");
const installBtn = document.getElementById("installCardBtn");
const installNow = document.getElementById("installNow");

/* Detect iOS */
const isIOS = /iphone|ipad|ipod/i.test(navigator.userAgent);
const isStandalone = window.matchMedia('(display-mode: standalone)').matches;

/* Hide if already installed */
if (isStandalone) {
    installBtn.style.display = "none";
}

/* Android / Chrome */
window.addEventListener("beforeinstallprompt", e => {
    e.preventDefault();
    deferredPrompt = e;
});

installBtn.addEventListener("click", () => {
    modal.classList.add("show");

    if (isIOS) {
        installText.innerHTML =
        `Tap <b>Share</b> ‚Üí <b>Add to Home Screen</b><br>
        to install this app on your iPhone.`;
        installNow.style.display="none";
    } else {
        installText.innerText =
        "Install Invoice Pro for faster access and offline use.";
        installNow.style.display="block";
    }
});

installNow.addEventListener("click", async () => {
    if (!deferredPrompt) return;
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    if (outcome === "accepted") closeModal();
    deferredPrompt = null;
});

function closeModal(){
    modal.classList.remove("show");
}

/* After install */
window.addEventListener("appinstalled", () => {
    installBtn.style.display="none";
    closeModal();
});
</script>

</body>
</html>