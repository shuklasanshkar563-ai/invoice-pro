<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Personal Invoice</title>

<link rel="stylesheet" href="{{ url_for('static', filename='css/app.css') }}">
</head>
<body>

<header class="app-header">
    <a href="/" class="back-btn">‚Üê</a>
    <h1>personal Invoice</h1>

    <div class="theme-switch">
        <button onclick="setTheme('light')">‚òÄ</button>
        <button onclick="setTheme('dark')">üåô</button>
    </div>
</header>

<main class="app-body">

<form class="app-form" action="/generate" method="POST" enctype="multipart/form-data">

<input type="hidden" name="invoice_type" value="personal">

<!-- PERSONAL DETAILS -->
<div class="form-card">
<h3>Personal Details</h3>

<input name="name" placeholder="Your Name" required>
<input name="mobile" placeholder="Mobile Number">

<label class="single-check">
<input type="checkbox" name="show_mobile"> Show Mobile on PDF
</label>
</div>

<!-- PAYMENT DETAILS -->
<div class="form-card">
<h3>Payment Details</h3>

<input name="service_name" placeholder="Purpose (Rent / Loan / Gift)">
<input type="number" name="quantity" value="1" min="1">
<input type="number" step="0.01" name="rate" placeholder="Amount">

<!-- LIVE TOTAL -->
<div class="total-box">
Total: ‚Çπ <span id="totalAmount">0.00</span>
</div>

<!-- PAYMENT MODE -->
<select name="payment_mode">
<option value="">Payment Mode</option>
<option>Cash</option>
<option>UPI</option>
<option>Bank Transfer</option>
<option>Other</option>
</select>

<!-- PAYMENT DATE -->
<input type="date" name="payment_date">

<textarea name="note" placeholder="Optional Note"></textarea>

<label class="single-check">
<input type="checkbox" name="show_note"> Show Note on PDF
</label>
</div>

<!-- PHOTO UPLOAD -->
<div class="form-card">
<h3>Attach Proof (Optional)</h3>

<input type="file" name="proof_image" accept="image/*">

<p class="hint">
üì∏ Upload payment proof / receipt / photo  
(This image will appear in the PDF)
</p>
</div>

<!-- SETTINGS -->
<div class="form-card">
<h3>Invoice Settings</h3>
<input name="name_pdf" placeholder="PDF File Name (optional)">
</div>

<button class="primary-btn" type="submit">
Generate PDF
</button>

</form>

</main>

<!-- JS -->
<script>
const qty = document.querySelector('input[name="quantity"]');
const rate = document.querySelector('input[name="rate"]');
const total = document.getElementById('totalAmount');

function updateTotal() {
    const q = parseFloat(qty.value || 1);
    const r = parseFloat(rate.value || 0);
    total.innerText = (q * r).toFixed(2);
}

qty.addEventListener("input", updateTotal);
rate.addEventListener("input", updateTotal);
</script>
<style>
    :root {
    --bg: #f3f4f6;
    --card: #ffffff;
    --text: #111;
    --sub: #555;
    --header: #5b6cff;
}

body.dark {
    --bg: #0f172a;
    --card: #1e293b;
    --text: #f8fafc;
    --sub: #cbd5e1;
    --header: #020617;
}

body {
    background: var(--bg);
    color: var(--text);
}

/* header */
.app-header {
    background: var(--header);
    color: #fff;
}

/* cards */
.form-card {
    background: var(--card);
}

/* inputs */
input, textarea, select {
    background: var(--card);
    color: var(--text);
    border: 1px solid #ccc;
}

body.dark input,
body.dark textarea,
body.dark select {
    border-color: #334155;
}

/* total box */
.total-box {
    background: rgba(91,108,255,0.15);
    color: var(--text);
}

/* theme buttons */
.theme-switch {
    position: absolute;
    right: 12px;
    top: 12px;
    display: flex;
    gap: 6px;
}

.theme-switch button {
    border: none;
    background: rgba(255,255,255,0.25);
    color: white;
    padding: 6px 8px;
    border-radius: 8px;
    font-size: 12px;
    cursor: pointer;
}
</style>
<script>
function setTheme(mode) {
    document.body.classList.toggle("dark", mode === "dark");
    localStorage.setItem("theme", mode);
}

(function () {
    const savedTheme = localStorage.getItem("theme") || "light";
    setTheme(savedTheme);
})();
</script>

</body>
</html>
